# 8월 29일 개발 로그

- 일단 다른 거 다 재끼고 코드 리팩토링 먼저. 진짜 금방할 줄 알았는데 어제 이걸로 시간 다 버림


## MQTT 토픽 관련 정리

### 기기에서 제공할 수 있는 데이터

- 전부 포함할 필요는 없고, 이 중에 괜찮아 보이는 것만 선별적으로 사용하면 될 듯

- 기기 부팅 후 네트워크 연결 시 기기 내부 RTC를 시간 서버로부터 받아서 초기화할 수 있으므로, 필요하다면 현재 시간은 쉽게 구현할 수 있음

1. 시스템 운영 / 관리 데이터

    - 기기 상태 모니터링

        - 펌웨어 버전

        - 전원 정보

            - 부팅된 후 흐른 시간

        - 네트워크 연결 상태
        
            - Health
            
            - 연결된 AP의 SSID

            - 연결 지속 시간
        
        - 오류 로그(기기 내부 오류 발생 시마다)

        - 잔여 메모리 / 스토리지 용량 정보

2. 매출 / 거래 관련 데이터

    - 상품별 거래 건수

    - 시간별 거래 건수

    - 시간대별 각 상품의 거래 건수

        - 모든 시간의 거래 건수를 확인할 필요는 없을 것 같고, 적당하게 시간대를 나누어(아침 / 점심 / 오후(peak) / 저녁 / 새벽 등) 제공하면 좋을 듯?

### 프론트엔드 기준 제공 기능

- 펌웨어 OTA

    - 사소한 것이기는 한데, 시간을 UTC로 통일하였다면 `업로드 시간(UTC)`같은 식으로 UTC 기준임을 알려주면 좋을 것 같음

- 기기 관리

    - 기기 자체는 MQTT 연결 / 연결 해제 시 자동으로 시스템에 추가 / 삭제

    - 개인적인 의견으로는, 기기 관리를 '시스템 관리'로 바꾸고 하위 메뉴로 연결된 기기 관리와 서버(백엔드) 관리로 나누는 것이 좋을 것 같음

        - 연결된 기기 관리는 연결된 각 기기에서 제공하는 [시스템 운영 / 관리 데이터](#기기에서-제공할-수-있는-데이터), 서버 관리는 Grafana 이용하여 백엔드 Health 관련된 정보들 제공하면 좋을 것 같음

        - [매출 / 거래 관련 데이터](#기기에서-제공할-수-있는-데이터)를 여기서 제공해도 안될 것은 없지만, 프론트엔드 자체가 가게 사장님들을 대상으로 한다면 오히려 매출 / 거래 관련 데이터를 '모니터링' 탭에 담는 것이 더 좋을 것 같음

- 나머지는 내일 정리하자...
