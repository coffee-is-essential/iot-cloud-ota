# 8월 24일 로그

## 1. 빌드 문제 해결

- 어제 빌드 안되는 문제 해결 못하고 출근해서 오늘은 UI 마무리를 위해 빌드 문제부터 해결해야 함

- 오늘 첫 빌드 포함 사항

    - [x] `task`, `ui` 디렉토리를 `main`으로 옮긴 후, `CMakeLists.txt` 수정

- 이 문제 해결 후 펌웨어 버전 잘 나오는 것 확인하면 UI 부분은 종료


## 2. 네트워크 기능 추가

- 펌웨어 버전 표시 관련해서 이벤트 함수 연결에 조금 애를 먹기는 했지만, 아무튼 성공적으로 버전 정보를 표시하고 있음

    - 덕분에 이벤트 함수 구조도 더 깔끔해짐. 좋은게 좋은 거다!

- 암튼 이번엔 네트워크 기능을 추가한다. 이 기능 추가하는 것까지가 일요일인 오늘까지 해결해야하는 범위임

- 기본적으로 네트워크 연결 흐름은 다음과 같음

    1. 부팅 시 내부 JSON 파일을 통해 마지막으로 연결했던 Wi-Fi 정보를 얻어와서 연결을 시도함

    2. Wi-Fi 설정 스크린에서 Restore 버튼을 누르면 자동으로 SSID와 PW TextArea가 채워지면서 자동으로 연결까지 시도함

        - 기본적으로 이미 Wi-Fi가 연결된 상태에서 다시 연결 시도를 하면 기존 연결을 명시적으로 끊어줌

    3. Wi-Fi 설정 스크린에서 Connect를 통해 명시적으로 연결하는 경우 그냥 그대로 Wi-Fi 연결 수행

        - 단, SSID가 불가능한 경우에는 제외!

- 오늘의 메인 빌드 포함 사항

    - [x] `config.json` 정의

    - [x] Wi-Fi 드라이버에 네트워크 연결을 종료하는 로직 추가

        - 이미 연결된 상태에서 다시 연결하려고 하면 내부적으로 알아서 연결 끊고 다시 연결 시도하기 때문에 굳이 필요 없음. 넘어가!

    - [x] 부팅 시 JSON 로드

    - [ ] Wi-Fi 연결 로직 추가

        - [ ] UI 상 Wi-Fi 연결 정보 표현하는 부분에 관련 로직 추가


### `config.json` 정의

- 기기 초기화 관련 상수들을 저장해둔 파일

- 포함하는 내용들

    - Wi-Fi 자동 연결 시도 여부

    - 마지막으로 연결했던 Wi-Fi SSID

    - 마지막으로 연결했던 Wi-Fi PW

    - MQTT 서버 자동 연결 시도 여부

    - 마지막으로 연결했던 MQTT 서버 주소

    - 마지막으로 연결했던 MQTT 서버 포트 번호


## 오늘 작업 마무리 시 해야할 일

- [x] coffee-driver 업데이트

- [x] embedded-testbed를 프로젝트 본 디렉토리로 통합

- [ ] 하드웨어 개발에 추가로 필요한 자제 정리
